<!DOCTYPE html>
<head>
  <meta name="Fireworks" http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <style media="screen">
   @keyframes dotPosition{
      from {top: 140px;}
      to {top:0px;}
    }
   @keyframes dotBlur{
      0% {opacity: 1; filter: blur(0px);}
      50% {opacity: 0.8; filter: blur(0px);}
      100% {opacity: 0; filter: blur(10px);}
    }
    @keyframes dotLength {
      0%{ height: 10px;}
      20%{ height: 40px;}
      100%{ height: 0px;}
    }
    @keyframes centerBlow {
      from {width:10px; height:10px; border-radius: 10px; border-width: 10px; opacity: 1; filter: blur(0px); transform: translate(0px,0px);}
      to {width:80px; height:80px; border-radius: 40px; border-width: 30px; opacity: 0; filter: blur(20px); transform: translate(-35px,-35px);}
    }
    body{
      background-image: linear-gradient(to bottom, #000000, #000840);
      height: 100%;
      margin: 0;
      background-repeat: no-repeat;
      background-attachment: fixed;
    }
    #view {
       height:100%;
       width:100%;
       overflow: hidden;
       position:absolute;
    }
    .mainframe{
      position: absolute;
    }
    .frame{
      width: 40px;
      height: 150px;
      position: absolute;
      top: 10px;
      left: 130px;
      transform-origin: 20px 140px;
    }
    .dot{
      position: absolute;
      animation: dotPosition 1.2s ease-out forwards, dotBlur 1.2s linear forwards, dotLength 1.2s ease-in-out forwards;
    }
    .core{
      position: absolute;
      left:145px;
      top:145px;
      box-sizing: border-box;
      border-style: solid;
      animation: centerBlow 0.8s ease-out forwards;
    }
  </style>
</head>
<body id="body">
  <div id="view" onclick="fireworkClassic()"></div>
</body>
<script type="text/javascript">
  let view = document.getElementById("view");
  function fireworkClassic(x, y, sectionCount, offsetAngle, dotWidth, red, green, blue) {
    let viewWidth = view.getBoundingClientRect().width;
    let viewHeight = view.getBoundingClientRect().height;
    x  = (typeof x == 'number') ?  x : Math.random() * viewWidth;
    y  = (typeof y == 'number') ?  y : Math.random() * viewHeight;
    sectionCount = Math.floor((sectionCount <= 14 && sectionCount >= 6) ?  sectionCount : Math.random() * 8 + 6);
    sectionAngle = 360 / sectionCount;
    offsetAngle = (typeof offsetAngle == 'number') ?  offsetAngle : Math.random() * 360;
    dotWidth = (typeof dotWidth == 'number') ?  dotWidth : Math.random() * 20 + 5;
    red = (red <= 255 && red >= 0) ?  red : Math.random() * 230 + 25;
    green = (green <= 255 && green >= 0) ?  green : Math.random() * 230 + 25;
    blue = (green <= 255 && green >= 0) ?  green : Math.random() * 230 + 25;
    setTimeout("clean()", 0);
    mainframe = document.createElement("DIV");
    mainframe.setAttribute("birth", Date.now());
    mainframe.className = "mainframe";
    mainframe.style.left = (x - 150) + "px";
    mainframe.style.top = (y - 150) + "px";
    view.appendChild(mainframe);
    let frame;
    let dot;
    let core = document.createElement("DIV");
    core.className = "core";
    core.style.borderColor = "rgb(" + (red + 30) + "," + (green + 30) + "," + (blue + 30) + ")";
    mainframe.appendChild(core);
    for (let i = 0; i < sectionCount; i++) {
      frame = document.createElement("DIV");
      frame.className = "frame";
      frame.style.transform = "rotate(" + (sectionAngle * i + offsetAngle) + "deg)";
      dot = document.createElement("DIV");
      dot.className = "dot";
      dot.style.width = dotWidth + "px";
      dot.style.left = 20 - dotWidth / 2 + "px";
      dot.style.borderRadius = Math.random() * dotWidth + "px " + Math.random() * dotWidth + "px " + Math.random() * dotWidth + "px " + Math.random() * dotWidth + "px";
      dot.style.backgroundColor = "rgb(" + red + "," + green + "," + blue + ")";
      frame.appendChild(dot);
      mainframe.appendChild(frame);
    }
  }
  function clean(view){
    let nodes = view.childNodes;
    let node;
    nodes.forEach(function(node){
      if (node.tagName == "DIV") {
        if (Date.now() - parseInt(node.getAttribute("birth")) > 1200) {
          view.removeChild(node);
        }
      }
    });
  }
  auto = setInterval(fireworkClassic, 150);
</script>
