<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>ZELDA 35 HOORAY</title>
  <style media="screen">
  body{
    height: 100%;
    margin: 0;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }
  img{
    width:60vw;
    height:30vw;
    position: absolute;
    top: calc(50vh - 15vw);
    left:20vw;
  }
  #view {
     background-image: linear-gradient(to bottom, #000000, #000840);
     background-color: black;
     height:100%;
     width:100%;
     overflow: hidden;
     position:absolute;
  }
  </style>
  <link rel="stylesheet" href="fireworks.css">
</head>
<body id="body">
  <div id="view"></div>
  <img id="logo" style="opacity: 0.2" src="Zelda_35th_Logo.svg" alt="Nintendo Direct">
</body>
<script src="fireworks.js" type="text/javascript"></script>
<script type="text/javascript">
  let view = document.getElementById("view");
  let logo = document.getElementById("logo");
  function autoFireworks(){
    let radius = Math.random() * 175 + 75;
    let bokeh = (200 - radius) / 30;
    bokeh *= bokeh;
    let firework = fireworksClassic(view, null, null, radius, null, null, null, null, null, null, null);
    firework.style.filter = "blur(" + bokeh + "px)";
    let opacity = 1.2 - ((radius >= 200) ? 0.2 : 60 / (200 - radius));
    firework.style.opacity = opacity;
    overlay = logo.cloneNode(true);
    overlay.setAttribute("expire", Date.now() + 1000);
    overlay.className = "overlay";
    document.body.appendChild(overlay);
    overlay.animate([
      {opacity: 0},
      {opacity: opacity * 0.56 - 0.08, offset: 0.05},
      {opacity: 0}
    ],{
      duration: 1000,
      easing: "ease-in-out",
      fill: "forwards"
    });
    setTimeout("autoFireworks()",Math.random() * 500 + 400);
    setTimeout(function() {cleanOverlay()}, 1000);
  }

  function cleanOverlay(){
    for (var node of document.body.childNodes) {
      if (node.className == "overlay") {
        if (Date.now() >= parseInt(node.getAttribute("expire"))) {
          document.body.removeChild(node);
          return;
        }
      }
    }
  }
  autoFireworks();
</script>
